{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/snehalprajapati/Desktop/AGILE/study-sync-app-build/lib/jwt.ts"],"sourcesContent":["import crypto from \"crypto\"\n\nconst SECRET = process.env.JWT_SECRET || \"study-sync-secret-key-change-in-production\"\n\ninterface JWTPayload {\n  id: string\n  email: string\n  name: string\n  iat?: number\n  exp?: number\n}\n\nexport function generateToken(payload: JWTPayload): string {\n  const header = Buffer.from(JSON.stringify({ alg: \"HS256\", typ: \"JWT\" })).toString(\"base64url\")\n\n  const now = Math.floor(Date.now() / 1000)\n  const tokenPayload = {\n    ...payload,\n    iat: now,\n    exp: now + 7 * 24 * 60 * 60,\n  }\n\n  const body = Buffer.from(JSON.stringify(tokenPayload)).toString(\"base64url\")\n  const signature = crypto.createHmac(\"sha256\", SECRET).update(`${header}.${body}`).digest(\"base64url\")\n\n  return `${header}.${body}.${signature}`\n}\n\nexport function verifyToken(token: string): JWTPayload | null {\n  try {\n    const [header, body, signature] = token.split(\".\")\n    const expectedSignature = crypto.createHmac(\"sha256\", SECRET).update(`${header}.${body}`).digest(\"base64url\")\n\n    if (signature !== expectedSignature) {\n      return null\n    }\n\n    const payload = JSON.parse(Buffer.from(body, \"base64url\").toString())\n\n    if (payload.exp && payload.exp < Math.floor(Date.now() / 1000)) {\n      return null\n    }\n\n    return payload\n  } catch (error) {\n    return null\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,UAAU,IAAI;AAUlC,SAAS,cAAc,OAAmB;IAC/C,MAAM,SAAS,OAAO,IAAI,CAAC,KAAK,SAAS,CAAC;QAAE,KAAK;QAAS,KAAK;IAAM,IAAI,QAAQ,CAAC;IAElF,MAAM,MAAM,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK;IACpC,MAAM,eAAe;QACnB,GAAG,OAAO;QACV,KAAK;QACL,KAAK,MAAM,IAAI,KAAK,KAAK;IAC3B;IAEA,MAAM,OAAO,OAAO,IAAI,CAAC,KAAK,SAAS,CAAC,eAAe,QAAQ,CAAC;IAChE,MAAM,YAAY,gHAAM,CAAC,UAAU,CAAC,UAAU,QAAQ,MAAM,CAAC,GAAG,OAAO,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC;IAEzF,OAAO,GAAG,OAAO,CAAC,EAAE,KAAK,CAAC,EAAE,WAAW;AACzC;AAEO,SAAS,YAAY,KAAa;IACvC,IAAI;QACF,MAAM,CAAC,QAAQ,MAAM,UAAU,GAAG,MAAM,KAAK,CAAC;QAC9C,MAAM,oBAAoB,gHAAM,CAAC,UAAU,CAAC,UAAU,QAAQ,MAAM,CAAC,GAAG,OAAO,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC;QAEjG,IAAI,cAAc,mBAAmB;YACnC,OAAO;QACT;QAEA,MAAM,UAAU,KAAK,KAAK,CAAC,OAAO,IAAI,CAAC,MAAM,aAAa,QAAQ;QAElE,IAAI,QAAQ,GAAG,IAAI,QAAQ,GAAG,GAAG,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK,OAAO;YAC9D,OAAO;QACT;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF"}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///Users/snehalprajapati/Desktop/AGILE/study-sync-app-build/lib/fs.ts"],"sourcesContent":["import { promises as fs } from \"fs\"\nimport path from \"path\"\n\nconst DATA_DIR = path.join(process.cwd(), \"data\")\n\nexport async function readJSON(filename: string) {\n  try {\n    const filePath = path.join(DATA_DIR, filename)\n    const data = await fs.readFile(filePath, \"utf-8\")\n    console.log(`[v0] Successfully read ${filename}`)\n    return JSON.parse(data)\n  } catch (error) {\n    console.log(`[v0] File not found: ${filename}, returning empty array`)\n    return []\n  }\n}\n\nexport async function writeJSON(filename: string, data: any) {\n  try {\n    const filePath = path.join(DATA_DIR, filename)\n    await fs.mkdir(DATA_DIR, { recursive: true })\n    await fs.writeFile(filePath, JSON.stringify(data, null, 2))\n    console.log(`[v0] Successfully wrote to ${filename}`)\n    return true\n  } catch (error) {\n    console.error(`[v0] Error writing to ${filename}:`, error)\n    throw error\n  }\n}\n\nexport function generateId() {\n  return `${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEA,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAEnC,eAAe,SAAS,QAAgB;IAC7C,IAAI;QACF,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,UAAU;QACrC,MAAM,OAAO,MAAM,yGAAE,CAAC,QAAQ,CAAC,UAAU;QACzC,QAAQ,GAAG,CAAC,CAAC,uBAAuB,EAAE,UAAU;QAChD,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,GAAG,CAAC,CAAC,qBAAqB,EAAE,SAAS,uBAAuB,CAAC;QACrE,OAAO,EAAE;IACX;AACF;AAEO,eAAe,UAAU,QAAgB,EAAE,IAAS;IACzD,IAAI;QACF,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,UAAU;QACrC,MAAM,yGAAE,CAAC,KAAK,CAAC,UAAU;YAAE,WAAW;QAAK;QAC3C,MAAM,yGAAE,CAAC,SAAS,CAAC,UAAU,KAAK,SAAS,CAAC,MAAM,MAAM;QACxD,QAAQ,GAAG,CAAC,CAAC,2BAA2B,EAAE,UAAU;QACpD,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,sBAAsB,EAAE,SAAS,CAAC,CAAC,EAAE;QACpD,MAAM;IACR;AACF;AAEO,SAAS;IACd,OAAO,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI;AACnE"}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///Users/snehalprajapati/Desktop/AGILE/study-sync-app-build/lib/validations.ts"],"sourcesContent":["import { z } from \"zod\"\n\nexport const registerSchema = z.object({\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\n  email: z.string().email(\"Invalid email\"),\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\n})\n\nexport const loginSchema = z.object({\n  email: z.string().email(\"Invalid email\"),\n  password: z.string().min(1, \"Password required\"),\n})\n\nexport const taskSchema = z.object({\n  title: z.string().min(1, \"Title required\"),\n  subject: z.string().min(1, \"Subject required\"),\n  dueDate: z.string().optional(),\n  description: z.string().optional(),\n})\n\nexport const sessionSchema = z.object({\n  taskId: z.string().min(1, \"Task ID required\"),\n  duration: z.number().min(1, \"Duration must be positive\"),\n  notes: z.string().optional(),\n})\n\nexport type RegisterInput = z.infer<typeof registerSchema>\nexport type LoginInput = z.infer<typeof loginSchema>\nexport type TaskInput = z.infer<typeof taskSchema>\nexport type SessionInput = z.infer<typeof sessionSchema>\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEO,MAAM,iBAAiB,yKAAC,CAAC,MAAM,CAAC;IACrC,MAAM,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxB,OAAO,yKAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC9B;AAEO,MAAM,cAAc,yKAAC,CAAC,MAAM,CAAC;IAClC,OAAO,yKAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC9B;AAEO,MAAM,aAAa,yKAAC,CAAC,MAAM,CAAC;IACjC,OAAO,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACzB,SAAS,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC3B,SAAS,yKAAC,CAAC,MAAM,GAAG,QAAQ;IAC5B,aAAa,yKAAC,CAAC,MAAM,GAAG,QAAQ;AAClC;AAEO,MAAM,gBAAgB,yKAAC,CAAC,MAAM,CAAC;IACpC,QAAQ,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC1B,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC5B,OAAO,yKAAC,CAAC,MAAM,GAAG,QAAQ;AAC5B"}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":["file:///Users/snehalprajapati/Desktop/AGILE/study-sync-app-build/app/api/sessions/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\nimport { verifyToken } from \"@/lib/jwt\"\nimport { readJSON, writeJSON, generateId } from \"@/lib/fs\"\nimport { sessionSchema } from \"@/lib/validations\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const token = request.headers.get(\"authorization\")?.replace(\"Bearer \", \"\")\n    if (!token) return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n\n    const payload = verifyToken(token)\n    if (!payload) return NextResponse.json({ error: \"Invalid token\" }, { status: 401 })\n\n    const sessions = await readJSON(\"sessions.json\")\n    const userSessions = sessions\n      .filter((s: any) => s.userId === payload.id)\n      .sort((a: any, b: any) => new Date(b.date).getTime() - new Date(a.date).getTime())\n\n    return NextResponse.json({ sessions: userSessions })\n  } catch (error: any) {\n    console.error(\"[v0] Get sessions error:\", error)\n    return NextResponse.json({ error: error.message || \"Failed to fetch sessions\" }, { status: 400 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const token = request.headers.get(\"authorization\")?.replace(\"Bearer \", \"\")\n    if (!token) return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n\n    const payload = verifyToken(token)\n    if (!payload) return NextResponse.json({ error: \"Invalid token\" }, { status: 401 })\n\n    const body = await request.json()\n    const { taskId, duration, notes } = sessionSchema.parse(body)\n\n    const tasks = await readJSON(\"tasks.json\")\n    const task = tasks.find((t: any) => t.id === taskId && t.userId === payload.id)\n\n    if (!task) {\n      return NextResponse.json({ error: \"Task not found or does not belong to you\" }, { status: 404 })\n    }\n\n    const sessions = await readJSON(\"sessions.json\")\n    const newSession = {\n      id: generateId(),\n      userId: payload.id,\n      taskId,\n      duration,\n      notes: notes || \"\",\n      date: new Date().toISOString(),\n      createdAt: new Date().toISOString(),\n    }\n\n    sessions.push(newSession)\n    await writeJSON(\"sessions.json\", sessions)\n\n    return NextResponse.json(newSession, { status: 201 })\n  } catch (error: any) {\n    console.error(\"[v0] Create session error:\", error)\n    const errorMessage = error.errors?.[0]?.message || error.message || \"Failed to create session\"\n    return NextResponse.json({ error: errorMessage }, { status: 400 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,kBAAkB,QAAQ,WAAW;QACvE,IAAI,CAAC,OAAO,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;QAE9E,MAAM,UAAU,IAAA,2HAAW,EAAC;QAC5B,IAAI,CAAC,SAAS,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAgB,GAAG;YAAE,QAAQ;QAAI;QAEjF,MAAM,WAAW,MAAM,IAAA,uHAAQ,EAAC;QAChC,MAAM,eAAe,SAClB,MAAM,CAAC,CAAC,IAAW,EAAE,MAAM,KAAK,QAAQ,EAAE,EAC1C,IAAI,CAAC,CAAC,GAAQ,IAAW,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO;QAEjF,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,UAAU;QAAa;IACpD,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO,IAAI;QAA2B,GAAG;YAAE,QAAQ;QAAI;IACjG;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,kBAAkB,QAAQ,WAAW;QACvE,IAAI,CAAC,OAAO,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;QAE9E,MAAM,UAAU,IAAA,2HAAW,EAAC;QAC5B,IAAI,CAAC,SAAS,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAgB,GAAG;YAAE,QAAQ;QAAI;QAEjF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,qIAAa,CAAC,KAAK,CAAC;QAExD,MAAM,QAAQ,MAAM,IAAA,uHAAQ,EAAC;QAC7B,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK,UAAU,EAAE,MAAM,KAAK,QAAQ,EAAE;QAE9E,IAAI,CAAC,MAAM;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA2C,GAAG;gBAAE,QAAQ;YAAI;QAChG;QAEA,MAAM,WAAW,MAAM,IAAA,uHAAQ,EAAC;QAChC,MAAM,aAAa;YACjB,IAAI,IAAA,yHAAU;YACd,QAAQ,QAAQ,EAAE;YAClB;YACA;YACA,OAAO,SAAS;YAChB,MAAM,IAAI,OAAO,WAAW;YAC5B,WAAW,IAAI,OAAO,WAAW;QACnC;QAEA,SAAS,IAAI,CAAC;QACd,MAAM,IAAA,wHAAS,EAAC,iBAAiB;QAEjC,OAAO,gJAAY,CAAC,IAAI,CAAC,YAAY;YAAE,QAAQ;QAAI;IACrD,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM,eAAe,MAAM,MAAM,EAAE,CAAC,EAAE,EAAE,WAAW,MAAM,OAAO,IAAI;QACpE,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAa,GAAG;YAAE,QAAQ;QAAI;IAClE;AACF"}}]
}