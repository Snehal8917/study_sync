{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/snehalprajapati/Desktop/AGILE/study-sync-app-build/lib/jwt.ts"],"sourcesContent":["import crypto from \"crypto\"\n\nconst SECRET = process.env.JWT_SECRET || \"study-sync-secret-key-change-in-production\"\n\ninterface JWTPayload {\n  id: string\n  email: string\n  name: string\n  iat?: number\n  exp?: number\n}\n\nexport function generateToken(payload: JWTPayload): string {\n  const header = Buffer.from(JSON.stringify({ alg: \"HS256\", typ: \"JWT\" })).toString(\"base64url\")\n\n  const now = Math.floor(Date.now() / 1000)\n  const tokenPayload = {\n    ...payload,\n    iat: now,\n    exp: now + 7 * 24 * 60 * 60,\n  }\n\n  const body = Buffer.from(JSON.stringify(tokenPayload)).toString(\"base64url\")\n  const signature = crypto.createHmac(\"sha256\", SECRET).update(`${header}.${body}`).digest(\"base64url\")\n\n  return `${header}.${body}.${signature}`\n}\n\nexport function verifyToken(token: string): JWTPayload | null {\n  try {\n    const [header, body, signature] = token.split(\".\")\n    const expectedSignature = crypto.createHmac(\"sha256\", SECRET).update(`${header}.${body}`).digest(\"base64url\")\n\n    if (signature !== expectedSignature) {\n      return null\n    }\n\n    const payload = JSON.parse(Buffer.from(body, \"base64url\").toString())\n\n    if (payload.exp && payload.exp < Math.floor(Date.now() / 1000)) {\n      return null\n    }\n\n    return payload\n  } catch (error) {\n    return null\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,UAAU,IAAI;AAUlC,SAAS,cAAc,OAAmB;IAC/C,MAAM,SAAS,OAAO,IAAI,CAAC,KAAK,SAAS,CAAC;QAAE,KAAK;QAAS,KAAK;IAAM,IAAI,QAAQ,CAAC;IAElF,MAAM,MAAM,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK;IACpC,MAAM,eAAe;QACnB,GAAG,OAAO;QACV,KAAK;QACL,KAAK,MAAM,IAAI,KAAK,KAAK;IAC3B;IAEA,MAAM,OAAO,OAAO,IAAI,CAAC,KAAK,SAAS,CAAC,eAAe,QAAQ,CAAC;IAChE,MAAM,YAAY,gHAAM,CAAC,UAAU,CAAC,UAAU,QAAQ,MAAM,CAAC,GAAG,OAAO,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC;IAEzF,OAAO,GAAG,OAAO,CAAC,EAAE,KAAK,CAAC,EAAE,WAAW;AACzC;AAEO,SAAS,YAAY,KAAa;IACvC,IAAI;QACF,MAAM,CAAC,QAAQ,MAAM,UAAU,GAAG,MAAM,KAAK,CAAC;QAC9C,MAAM,oBAAoB,gHAAM,CAAC,UAAU,CAAC,UAAU,QAAQ,MAAM,CAAC,GAAG,OAAO,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC;QAEjG,IAAI,cAAc,mBAAmB;YACnC,OAAO;QACT;QAEA,MAAM,UAAU,KAAK,KAAK,CAAC,OAAO,IAAI,CAAC,MAAM,aAAa,QAAQ;QAElE,IAAI,QAAQ,GAAG,IAAI,QAAQ,GAAG,GAAG,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK,OAAO;YAC9D,OAAO;QACT;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF"}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///Users/snehalprajapati/Desktop/AGILE/study-sync-app-build/lib/fs.ts"],"sourcesContent":["import { promises as fs } from \"fs\"\nimport path from \"path\"\n\nconst DATA_DIR = path.join(process.cwd(), \"data\")\n\nexport async function readJSON(filename: string) {\n  try {\n    const filePath = path.join(DATA_DIR, filename)\n    const data = await fs.readFile(filePath, \"utf-8\")\n    return JSON.parse(data)\n  } catch (error) {\n    return []\n  }\n}\n\nexport async function writeJSON(filename: string, data: any) {\n  try {\n    const filePath = path.join(DATA_DIR, filename)\n    await fs.mkdir(DATA_DIR, { recursive: true })\n    await fs.writeFile(filePath, JSON.stringify(data, null, 2))\n  } catch (error) {\n    console.error(`Error writing to ${filename}:`, error)\n  }\n}\n\nexport function generateId() {\n  return `${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEA,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAEnC,eAAe,SAAS,QAAgB;IAC7C,IAAI;QACF,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,UAAU;QACrC,MAAM,OAAO,MAAM,yGAAE,CAAC,QAAQ,CAAC,UAAU;QACzC,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,OAAO,EAAE;IACX;AACF;AAEO,eAAe,UAAU,QAAgB,EAAE,IAAS;IACzD,IAAI;QACF,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,UAAU;QACrC,MAAM,yGAAE,CAAC,KAAK,CAAC,UAAU;YAAE,WAAW;QAAK;QAC3C,MAAM,yGAAE,CAAC,SAAS,CAAC,UAAU,KAAK,SAAS,CAAC,MAAM,MAAM;IAC1D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,iBAAiB,EAAE,SAAS,CAAC,CAAC,EAAE;IACjD;AACF;AAEO,SAAS;IACd,OAAO,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI;AACnE"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///Users/snehalprajapati/Desktop/AGILE/study-sync-app-build/lib/validations.ts"],"sourcesContent":["import { z } from \"zod\"\n\nexport const registerSchema = z.object({\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\n  email: z.string().email(\"Invalid email\"),\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\n})\n\nexport const loginSchema = z.object({\n  email: z.string().email(\"Invalid email\"),\n  password: z.string().min(1, \"Password required\"),\n})\n\nexport const taskSchema = z.object({\n  title: z.string().min(1, \"Title required\"),\n  subject: z.string().min(1, \"Subject required\"),\n  dueDate: z.string().optional(),\n  description: z.string().optional(),\n})\n\nexport const sessionSchema = z.object({\n  taskId: z.string().min(1, \"Task ID required\"),\n  duration: z.number().min(1, \"Duration must be positive\"),\n  notes: z.string().optional(),\n})\n\nexport type RegisterInput = z.infer<typeof registerSchema>\nexport type LoginInput = z.infer<typeof loginSchema>\nexport type TaskInput = z.infer<typeof taskSchema>\nexport type SessionInput = z.infer<typeof sessionSchema>\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEO,MAAM,iBAAiB,yKAAC,CAAC,MAAM,CAAC;IACrC,MAAM,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxB,OAAO,yKAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC9B;AAEO,MAAM,cAAc,yKAAC,CAAC,MAAM,CAAC;IAClC,OAAO,yKAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC9B;AAEO,MAAM,aAAa,yKAAC,CAAC,MAAM,CAAC;IACjC,OAAO,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACzB,SAAS,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC3B,SAAS,yKAAC,CAAC,MAAM,GAAG,QAAQ;IAC5B,aAAa,yKAAC,CAAC,MAAM,GAAG,QAAQ;AAClC;AAEO,MAAM,gBAAgB,yKAAC,CAAC,MAAM,CAAC;IACpC,QAAQ,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC1B,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC5B,OAAO,yKAAC,CAAC,MAAM,GAAG,QAAQ;AAC5B"}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///Users/snehalprajapati/Desktop/AGILE/study-sync-app-build/app/api/tasks/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\nimport { verifyToken } from \"@/lib/jwt\"\nimport { readJSON, writeJSON, generateId } from \"@/lib/fs\"\nimport { taskSchema } from \"@/lib/validations\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const token = request.headers.get(\"authorization\")?.replace(\"Bearer \", \"\")\n    if (!token) return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n\n    const payload = verifyToken(token)\n    if (!payload) return NextResponse.json({ error: \"Invalid token\" }, { status: 401 })\n\n    const tasks = await readJSON(\"tasks.json\")\n    const userTasks = tasks.filter((t: any) => t.userId === payload.id)\n\n    const { searchParams } = new URL(request.url)\n    const subject = searchParams.get(\"subject\")\n    const completed = searchParams.get(\"completed\")\n    const sort = searchParams.get(\"sort\")\n\n    let filtered = userTasks\n\n    if (subject) {\n      filtered = filtered.filter((t: any) => t.subject.toLowerCase().includes(subject.toLowerCase()))\n    }\n\n    if (completed !== null) {\n      filtered = filtered.filter((t: any) => t.completed === (completed === \"true\"))\n    }\n\n    if (sort === \"dueDate\") {\n      filtered.sort((a: any, b: any) => new Date(a.dueDate || \"\").getTime() - new Date(b.dueDate || \"\").getTime())\n    }\n\n    return NextResponse.json({ tasks: filtered })\n  } catch (error: any) {\n    return NextResponse.json({ error: error.message }, { status: 400 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const token = request.headers.get(\"authorization\")?.replace(\"Bearer \", \"\")\n    if (!token) return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n\n    const payload = verifyToken(token)\n    if (!payload) return NextResponse.json({ error: \"Invalid token\" }, { status: 401 })\n\n    const body = await request.json()\n    const { title, subject, dueDate, description } = taskSchema.parse(body)\n\n    const tasks = await readJSON(\"tasks.json\")\n    const newTask = {\n      id: generateId(),\n      userId: payload.id,\n      title,\n      subject,\n      dueDate: dueDate || null,\n      description: description || \"\",\n      completed: false,\n      createdAt: new Date().toISOString(),\n    }\n\n    tasks.push(newTask)\n    await writeJSON(\"tasks.json\", tasks)\n\n    return NextResponse.json(newTask, { status: 201 })\n  } catch (error: any) {\n    return NextResponse.json({ error: error.message }, { status: 400 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,kBAAkB,QAAQ,WAAW;QACvE,IAAI,CAAC,OAAO,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;QAE9E,MAAM,UAAU,IAAA,2HAAW,EAAC;QAC5B,IAAI,CAAC,SAAS,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAgB,GAAG;YAAE,QAAQ;QAAI;QAEjF,MAAM,QAAQ,MAAM,IAAA,uHAAQ,EAAC;QAC7B,MAAM,YAAY,MAAM,MAAM,CAAC,CAAC,IAAW,EAAE,MAAM,KAAK,QAAQ,EAAE;QAElE,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,UAAU,aAAa,GAAG,CAAC;QACjC,MAAM,YAAY,aAAa,GAAG,CAAC;QACnC,MAAM,OAAO,aAAa,GAAG,CAAC;QAE9B,IAAI,WAAW;QAEf,IAAI,SAAS;YACX,WAAW,SAAS,MAAM,CAAC,CAAC,IAAW,EAAE,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,QAAQ,WAAW;QAC7F;QAEA,IAAI,cAAc,MAAM;YACtB,WAAW,SAAS,MAAM,CAAC,CAAC,IAAW,EAAE,SAAS,KAAK,CAAC,cAAc,MAAM;QAC9E;QAEA,IAAI,SAAS,WAAW;YACtB,SAAS,IAAI,CAAC,CAAC,GAAQ,IAAW,IAAI,KAAK,EAAE,OAAO,IAAI,IAAI,OAAO,KAAK,IAAI,KAAK,EAAE,OAAO,IAAI,IAAI,OAAO;QAC3G;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAS;IAC7C,EAAE,OAAO,OAAY;QACnB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnE;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,kBAAkB,QAAQ,WAAW;QACvE,IAAI,CAAC,OAAO,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;QAE9E,MAAM,UAAU,IAAA,2HAAW,EAAC;QAC5B,IAAI,CAAC,SAAS,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAgB,GAAG;YAAE,QAAQ;QAAI;QAEjF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE,GAAG,kIAAU,CAAC,KAAK,CAAC;QAElE,MAAM,QAAQ,MAAM,IAAA,uHAAQ,EAAC;QAC7B,MAAM,UAAU;YACd,IAAI,IAAA,yHAAU;YACd,QAAQ,QAAQ,EAAE;YAClB;YACA;YACA,SAAS,WAAW;YACpB,aAAa,eAAe;YAC5B,WAAW;YACX,WAAW,IAAI,OAAO,WAAW;QACnC;QAEA,MAAM,IAAI,CAAC;QACX,MAAM,IAAA,wHAAS,EAAC,cAAc;QAE9B,OAAO,gJAAY,CAAC,IAAI,CAAC,SAAS;YAAE,QAAQ;QAAI;IAClD,EAAE,OAAO,OAAY;QACnB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnE;AACF"}}]
}